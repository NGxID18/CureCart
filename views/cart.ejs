<%- include('_header', { title: 'Keranjang Belanja' }) %>

<h1>Keranjang Belanja Anda</h1>

<% if (cart.length > 0) { %>
    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>Produk</th>
                        <th>Harga</th>
                        <th>Jumlah</th>
                        <th>Subtotal</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <% cart.forEach(item => { %>
                        <tr>
                            <td><%= item.name %></td>
                            <td>Rp <%= item.price %></td>
                            <td><%= item.quantity %></td>
                            <td>Rp <%= item.price * item.quantity %></td>
                            <td>
                                <a href="/cart/remove/<%= item.id %>" class="btn btn-danger btn-sm">Hapus</a>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row mt-4 justify-content-end">
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h3 class="card-title">Total Belanja:</h3>
                    <h2 class="text-danger">Rp <%= total %></h2>
                    <hr>
                    <h5>Metode Pembayaran (Menyusul)</h5>
                    <form action="/checkout" method="POST" class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">
                            Bayar Sekarang
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

<% } else { %>
    <div class="alert alert-info mt-4" role="alert">
        Keranjang Anda masih kosong. <a href="/" class="alert-link">Mulai belanja</a>!
    </div>
<% } %>

<%- include('_footer') %>