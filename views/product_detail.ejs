<%- include('_header', { title: product.name }) %>

<div class="mb-4 reveal-on-scroll">
    <form action="/" method="GET" class="d-flex">
        <input 
            class="form-control me-2" 
            type="search" 
            placeholder="Cari produk di etalase..." 
            name="search" 
            aria-label="Search"
        >
        <button class="btn btn-success" type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
            </svg>
        </button>
    </form>
</div>

<div class="card mb-4 reveal-on-scroll">
    <div class="card-body">
        <div class="row g-4">
            <div class="col-md-5">
                <% if (product.image_url) { %>
                    <img src="<%= product.image_url %>" alt="<%= product.name %>" class="img-fluid rounded">
                <% } else { %>
                    <div class="bg-secondary text-white text-center rounded" style="width: 100%; height: 300px; line-height: 300px;">No Image</div>
                <% } %>
            </div>
            <div class="col-md-7">
                <h1><%= product.name %></h1>
                <h2 class="text-danger">Rp <%= Number(product.price).toLocaleString('id-ID') %></h2>
                <p class="text-muted">Stok: <%= product.stock_quantity %></p>
                
                <hr>

                <form action="/cart/add/<%= product.id %>" method="POST">
                    <div class="input-group mb-3" style="max-width: 200px;">
                        <label class="input-group-text" for="quantity">Jumlah:</label>
                        <input type="number" id="quantity" name="quantity" class="form-control" value="1" min="1" max="<%= product.stock_quantity %>" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-plus-fill" viewBox="0 0 16 16">
                            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"/>
                        </svg>
                        Tambah ke Keranjang
                    </button>
                </form>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-12">
                <h3>Deskripsi Produk</h3>
                <p><%- product.description.replace(/\n/g, '<br>') %></p>
            </div>
        </div>
    </div>
</div>

<a href="/" class="btn btn-outline-secondary reveal-on-scroll">Â« Kembali ke Etalase</a>

<%- include('_footer') %>